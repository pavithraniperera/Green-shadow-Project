<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="assets/Styles/dashboard.css">
    <link rel="stylesheet" href="assets/Styles/Field.css">
    <link rel="stylesheet" href="assets/Styles/Staff.css">
    <link rel="stylesheet" href="assets/Styles/Vehicle.css">
    <title>Vehicle management</title>

</head>
<body>
<div class="top-navbar d-md-none d-flex justify-content-between align-items-center">
  <span class="menu-toggle">
            <i class="fas fa-bars fa-lg"></i>
            <i class="fa-solid fa-bell"></i>
            <i class="fa-solid fa-user"></i>

  </span>
    <img src="assets/images/greenshadowlogo-02.png" alt="Green Shadow Logo" class="img-fluid" style="height: 40px;">
</div>
<!-- Sidebar -->
<nav class="sidebar  border-right d-md-block d-none">
    <div class="sidebar-header p-3">
        <img src="assets/images/greenshadowlogo-02.png" alt="Green Shadow Logo" class="img-fluid">
    </div>
    <ul class="list-unstyled p-2">
        <li><a href="#"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
        <li><a href="#"><i class="fas fa-leaf"></i> Field Management</a></li>
        <li><a href="#"><i class="fas fa-seedling"></i> Crops Management</a></li>
        <li><a href="#"><i class="fas fa-users"></i> Staff</a></li>
        <li><a href="#"><i class="fas fa-book-open"></i> Monitoring Logs</a></li>
        <li><a href="#"><i class="fas fa-truck"></i> Vehicles</a></li>
        <li><a href="#"><i class="fas fa-tools"></i> Equipment</a></li>
        <li><a href="#"><i class="fa-solid fa-arrow-right-from-bracket"></i> Log out</a></li>
    </ul>
</nav>
<div class="main-content">
    <!-- Top Navbar -->
    <nav class="navbar navbar-light bg-light mb-4">
        <span class="navbar-brand dashboard-topic">Vehicle Management</span>
        <div class="profile-icon">
            <i class="fa-solid fa-bell"></i>
            <i class="fa-solid fa-user"></i>

        </div>
    </nav>
    <!--  Search Bar -->
    <div class="search-bar mb-4">
        <i class="fas fa-search "></i>
        <input id="vehicleSearch" type="text" placeholder=" Search by License Plate or Fuel Type...">
    </div>
    <!--container of fields-->
    <div class="container">
        <!-- Placeholder message when no fields are available -->
        <div class="no-data">
            <img src="assets/images/noData.png" class="no-data-img">
            <p class="empty-message">No Vehicles available to display</p>
        </div>
        <div class="vehicle-container">
            <div class="vehicle-filter-container">
                <label for="statusFilter" class="filter-label">Filter by Status:</label>
                <select id="statusFilter" class="filter-select">
                    <option value="all">All</option>
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                </select>
            </div>

            <div class="vehicle-table-wrapper">
                <table class="table vehicle-table">
                    <thead>
                    <tr>
                        <th>Vehicle Code</th>
                        <th>License Plate</th>
                        <th>Fuel Type</th>
                        <th>Status</th>
                        <th>Remarks</th>
                    </tr>
                    </thead>
                    <tbody id="vehicleTableBody">
                    <tr data-status="active">
                        <td>V001</td>
                        <td>AB-1234</td>
                        <td>Diesel</td>
                        <td>Active</td>
                        <td>Regular maintenance</td>
                    </tr>
                    <tr data-status="inactive">
                        <td>V002</td>
                        <td>CD-5678</td>
                        <td>Petrol</td>
                        <td>Inactive</td>
                        <td>Under repair</td>
                    </tr>
                    <!-- More rows as necessary -->
                    </tbody>
                </table>
            </div>
        </div>





    </div>
    <div class="add-btn-container">
        <button type="button" class="btn add-filed" data-toggle="modal" data-target="#addVehicleModal" style="width: 250px">  <i class="fas fa-plus-circle"></i>Add New Vehicle</button>
    </div>
</div>
<!-- Vehicle Details Modal -->
<div class="modal fade" id="vehicleDetailModal" tabindex="-1" aria-labelledby="vehicleDetailModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content custom-modal-background">
            <!-- Modal Header with Vehicle Icon and Title -->
            <div class="modal-header">
                <h4 class="modal-title" id="vehicleDetailModalLabel">
                    <i class="fas fa-truck" style="margin-right: 8px; color: #274D40"></i>
                    Vehicle Details
                </h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                <!-- Form for Vehicle Details -->
                <form id="vehicleDetailForm">
                    <!-- Vehicle Code -->
                    <div class="form-group">
                        <label for="vehicleCode">Vehicle Code</label>
                        <input type="text" class="form-control" id="vehicleCode" value="V123" readonly>
                    </div>

                    <!-- License Plate -->
                    <div class="form-group">
                        <label for="licensePlate">License Plate</label>
                        <input type="text" class="form-control" id="licensePlate" value="ABC-1234" readonly>
                    </div>

                    <!-- Fuel Type -->
                    <div class="form-group">
                        <label for="fuelType">Fuel Type</label>
                        <input type="text" class="form-control" id="fuelType" value="Diesel" readonly>
                    </div>

                    <!-- Status -->
                    <div class="form-group">
                        <label for="status">Status</label>
                        <input type="text" class="form-control" id="status" value="Active" readonly>
                    </div>

                    <!-- Allocated Staff -->
                    <div class="form-group">
                        <label for="allocatedStaff">Allocated Staff</label>
                        <input type="text" class="form-control" id="allocatedStaff" value="John Doe, Jane Smith" readonly>
                    </div>

                    <!-- Remarks -->
                    <div class="form-group">
                        <label for="remarks">Remarks</label>
                        <textarea class="form-control" id="remarks" rows="3" readonly>Vehicle requires maintenance next month.</textarea>
                    </div>
                </form>
            </div>

            <!-- Modal Footer with Action Buttons -->
            <div class="modal-footer btn-container">
                <button type="button" class="btn" data-dismiss="modal">
                    <i class="fas fa-times-circle"></i> Close
                </button>
                <button type="button" class="btn" id="updateVehicleBtn" onclick="toggleVehicleEditMode()">
                    <i class="fas fa-edit"></i> Update
                </button>
                <button type="button" class="btn" id="deleteVehicleBtn">
                    <i class="fas fa-trash-alt"></i> Delete
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Add Vehicle Modal -->
<div class="modal fade" id="addVehicleModal" tabindex="-1" role="dialog" aria-labelledby="addVehicleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document">
        <div class="modal-content add-modal-custom">
            <div class="modal-header">
                <h4 class="modal-title" id="addVehicleModalLabel" style="font-weight: bold">Add New Vehicle</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                <form id="addVehicleForm">
                    <!-- Vehicle Code -->
                    <div class="form-group">
                        <label for="vehicleCodeModal">Vehicle Code</label>
                        <input type="text" class="form-control glass-input" id="vehicleCodeModal" required>
                    </div>

                    <!-- License Plate -->
                    <div class="form-group">
                        <label for="licensePlateModal">License Plate</label>
                        <input type="text" class="form-control glass-input" id="licensePlateModal" required>
                    </div>

                    <!-- Fuel Type (Combo Box) -->
                    <div class="form-group">
                        <label for="fuelTypeModal">Fuel Type</label>
                        <select id="fuelTypeModal" class="form-control glass-input" required>
                            <option value="">Select Fuel Type</option>
                            <option value="Petrol">Petrol</option>
                            <option value="Diesel">Diesel</option>
                            <option value="Electric">Electric</option>
                            <!-- Add more fuel types as needed -->
                        </select>
                    </div>

                    <!-- Status -->
                    <div class="form-group">
                        <label for="statusModal">Status</label>
                        <input type="text" class="form-control glass-input" id="statusModal" required>
                    </div>

                    <!-- Assigned Staff with Dynamic Combo Boxes -->
                    <div class="form-group">
                        <label for="assignedStaff">Assigned Staff</label>
                        <div id="assignedStaffContainer">
                            <div class="d-flex align-items-center mb-2">
                                <select id="assignedStaff" class="form-control glass-input mr-2" name="assignedStaff[]" required>
                                    <option value="">Select Staff</option>
                                    <option value="Staff Member 1">Staff Member 1</option>
                                    <option value="Staff Member 2">Staff Member 2</option>
                                    <!-- Add more staff dynamically if needed -->
                                </select>
                                <button type="button" class="btn btn-sm custom-btn" onclick="removeStaff(this)">
                                    <i class="fa-regular fa-trash-can" style="color: green"></i>
                                </button>
                            </div>
                        </div>
                        <button type="button" class="btn btn-sm custom-btn mt-2" onclick="addStaff()" style="color: #274D40">+ Add Staff</button>
                    </div>

                    <!-- Remarks -->
                    <div class="form-group">
                        <label for="remarksModal">Remarks</label>
                        <textarea class="form-control glass-input" id="remarksModal" rows="3"></textarea>
                    </div>
                </form>
            </div>

            <!-- Modal Footer with Clear Button -->
            <div class="modal-footer btn-container">
                <button type="button" class="btn" onclick="clearVehicleForm()">
                    <i class="fas fa-eraser"></i> Clear
                </button>
                <button type="button" class="btn" data-dismiss="modal">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button id="addVehicleBtn" type="button" class="btn">
                    <i class="fas fa-plus"></i> Add Vehicle
                </button>
            </div>
        </div>
    </div>
</div>





<!-- jQuery and Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
</body>
<script>
    document.getElementById("statusFilter").addEventListener("change", function() {
        const selectedStatus = this.value;
        const tableRows = document.querySelectorAll("#vehicleTableBody tr");

        tableRows.forEach(row => {
            const rowStatus = row.getAttribute("data-status");

            if (selectedStatus === "all" || rowStatus === selectedStatus) {
                row.style.display = "";
            } else {
                row.style.display = "none";
            }
        });
    });

    document.getElementById("vehicleSearch").addEventListener("input", function() {
        const searchValue = this.value.toLowerCase();
        const tableRows = document.querySelectorAll("#vehicleTableBody tr");

        tableRows.forEach(row => {
            const licensePlate = row.cells[1].textContent.toLowerCase(); // Column 2: License Plate
            const fuelType = row.cells[2].textContent.toLowerCase(); // Column 3: Fuel Type

            if (licensePlate.includes(searchValue) || fuelType.includes(searchValue)) {
                row.style.display = ""; // Show row if there's a match
            } else {
                row.style.display = "none"; // Hide row if there's no match
            }
        });
    });

    document.querySelectorAll('table tbody tr').forEach(row => {
        row.addEventListener('click', function() {

            // Show the modal
            $('#vehicleDetailModal').modal('show');
        });
    });

    function toggleVehicleEditMode() {
        // Close the staffDetailModal
        $('#vehicleDetailModal').modal('hide');

        // Open the addStaffModal
        $('#addVehicleModal').modal('show');

        // Change the modal header to "Update Member"
        document.getElementById('addVehicleModalLabel').innerText = 'Update Vehicle details';

        // Change the button text from "Add Staff" to "Save Changes"
        const addVehicle = document.getElementById('addVehicleBtn');
        addVehicle.innerText = 'Save Changes';


    }
    function addStaff() {
        const container = document.getElementById("assignedStaffContainer");
        const staffDiv = document.createElement("div");
        staffDiv.className = "d-flex align-items-center mb-2";
        staffDiv.innerHTML = `
        <select class="form-control glass-input mr-2" name="assignedStaff[]" required>
            <option value="">Select Staff</option>
            <option value="Staff Member 1">Staff Member 1</option>
            <option value="Staff Member 2">Staff Member 2</option>
            <!-- Add more options here if needed -->
        </select>
        <button type="button" class="btn btn-sm custom-btn" onclick="removeStaff(this)">
            <i class="fa-regular fa-trash-can" style="color: green"></i>
        </button>
    `;
        container.appendChild(staffDiv);
    }

    function removeStaff(button) {
        button.parentElement.remove();
    }

    function clearVehicleForm() {
        document.getElementById("addVehicleForm").reset();
    }

</script>
</html>