<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="assets/Styles/dashboard.css">
    <link rel="stylesheet" href="assets/Styles/Field.css">
    <link rel="stylesheet" href="assets/Styles/Staff.css">
    <title>Staff Management</title>


</head>
<body>

<div class="top-navbar d-md-none d-flex justify-content-between align-items-center">
  <span class="menu-toggle">
            <i class="fas fa-bars fa-lg"></i>
            <i class="fa-solid fa-bell"></i>
            <i class="fa-solid fa-user"></i>

  </span>
    <img src="assets/images/greenshadowlogo-02.png" alt="Green Shadow Logo" class="img-fluid" style="height: 40px;">
</div>
<!-- Sidebar -->
<nav class="sidebar  border-right d-md-block d-none">
    <div class="sidebar-header p-3">
        <img src="assets/images/greenshadowlogo-02.png" alt="Green Shadow Logo" class="img-fluid">
    </div>
    <ul class="list-unstyled p-2">
        <li><a href="#"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
        <li><a href="#"><i class="fas fa-leaf"></i> Field Management</a></li>
        <li><a href="#"><i class="fas fa-seedling"></i> Crops Management</a></li>
        <li><a href="#"><i class="fas fa-users"></i> Staff</a></li>
        <li><a href="#"><i class="fas fa-book-open"></i> Monitoring Logs</a></li>
        <li><a href="#"><i class="fas fa-truck"></i> Vehicles</a></li>
        <li><a href="#"><i class="fas fa-tools"></i> Equipment</a></li>
        <li><a href="#"><i class="fa-solid fa-arrow-right-from-bracket"></i> Log out</a></li>
    </ul>
</nav>
<div class="main-content">
    <!-- Top Navbar -->
    <nav class="navbar navbar-light bg-light mb-4">
        <span class="navbar-brand dashboard-topic">Staff Management</span>
        <div class="profile-icon">
            <i class="fa-solid fa-bell"></i>
            <i class="fa-solid fa-user"></i>

        </div>
    </nav>
    <!--  Search Bar -->
    <div class="search-bar mb-4">
        <i class="fas fa-search "></i>
        <input id="staffSearch" type="text" placeholder="Search Staff members ...">
    </div>
    <!--container of fields-->
    <div class="container">
        <!-- Placeholder message when no fields are available -->
        <div class="no-data">
            <img src="assets/images/noData.png" class="no-data-img">
            <p class="empty-message">No Crops available to display</p>
        </div>
        <div class="staff-table-container mb-4">
            <table class="table staff-table">
                <thead>
                <tr>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Gender</th>
                    <th>Join Date</th>
                    <th>Email</th>
                    <th>Contact Number</th>
                    <th>Designation</th>
                    <th>Role</th>
                </tr>
                </thead>
                <tbody>
                <!-- Sample row, repeat or generate with data dynamically as needed -->
                <tr>
                    <td>John</td>
                    <td>Doe</td>
                    <td>Male</td>
                    <td>2022-05-01</td>
                    <td>john.doe@example.com</td>
                    <td>+1 234 567 890</td>
                    <td>Manager</td>
                    <td>MANAGER</td>
                </tr>
                <tr>
                    <td>Jane</td>
                    <td>Smith</td>
                    <td>Female</td>
                    <td>2023-01-15</td>
                    <td>jane.smith@example.com</td>
                    <td>+1 987 654 321</td>
                    <td>Office Assistant</td>
                    <td>OTHER</td>

                </tr>
                <!-- Add more rows as necessary -->
                </tbody>
            </table>
        </div>



    </div>
    <div class="add-btn-container">
        <button type="button" class="btn add-filed" data-toggle="modal" data-target="#addStaffModal" style="width: 250px">  <i class="fas fa-plus-circle"></i>Add Staff Member</button>
    </div>
</div>


<!-- Staff Details Modal -->
<div class="modal fade" id="staffDetailModal" tabindex="-1" aria-labelledby="staffDetailModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content custom-modal-background">
            <!-- Modal Header with Staff Name and Icon -->
            <div class="modal-header">
                <h4 class="modal-title" id="staffDetailModalLabel">
                    <i class="fas fa-user" style="margin-right: 8px; color: #274D40"></i>
                    <span id="staffName">Staff Member Name</span>
                </h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                <!-- Form for Staff Details -->
                <form id="staffDetailForm">
                    <!-- First Name -->
                    <div class="form-group">
                        <label for="firstName">First Name</label>
                        <input type="text" class="form-control" id="firstName" value="John" readonly>
                    </div>

                    <!-- Last Name -->
                    <div class="form-group">
                        <label for="lastName">Last Name</label>
                        <input type="text" class="form-control" id="lastName" value="Doe" readonly>
                    </div>

                    <!-- Email -->
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" class="form-control" id="email" value="johndoe@example.com" readonly>
                    </div>

                    <!-- Contact Number -->
                    <div class="form-group">
                        <label for="contact">Contact Number</label>
                        <input type="text" class="form-control" id="contact" value="123-456-7890" readonly>
                    </div>

                    <!-- Date of Birth -->
                    <div class="form-group">
                        <label for="dob">Date of Birth</label>
                        <input type="text" class="form-control" id="dob" value="1990-01-01" readonly>
                    </div>

                    <!-- Role -->
                    <div class="form-group">
                        <label for="role">Role</label>
                        <input type="text" class="form-control" id="role" value="Manager" readonly>
                    </div>

                    <!-- Designation -->
                    <div class="form-group">
                        <label for="designation">Designation</label>
                        <input type="text" class="form-control" id="designation" value="Team Leader" readonly>
                    </div>

                    <!-- Assigned Fields -->
                    <div class="form-group">
                        <label for="assignedFields">Assigned Fields</label>
                        <input type="text" class="form-control" id="assignedFields" value="Field A, Field B" readonly>
                    </div>

                    <!-- Assigned Vehicles -->
                    <div class="form-group">
                        <label for="assignedVehicles">Assigned Vehicles</label>
                        <input type="text" class="form-control" id="assignedVehicles" value="Vehicle X" readonly>
                    </div>
                </form>
            </div>

            <!-- Modal Footer with Action Buttons -->
            <div class="modal-footer btn-container">
                <button type="button" class="btn" data-dismiss="modal">
                    <i class="fas fa-times-circle"></i> Close
                </button>
                <button type="button" class="btn" id="updateBtn" onclick="toggleEditMode()">
                    <i class="fas fa-edit"></i> Update
                </button>
                <button type="button" class="btn" id="deleteBtn">
                    <i class="fas fa-trash-alt"></i> Delete
                </button>
                <button type="button" class="btn" id="saveBtn" style="display: none;" onclick="saveChanges()">
                    <i class="fas fa-save"></i> Save Changes
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Add New Staff Modal -->
<!-- Add New Staff Modal -->
<div class="modal fade" id="addStaffModal" tabindex="-1" role="dialog" aria-labelledby="addStaffModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document">
        <div class="modal-content add-modal-custom">
            <div class="modal-header">
                <h4 class="modal-title" id="addStaffModalLabel" style="font-weight: bold">Add New Staff</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                <form id="addStaffForm">
                    <!-- Staff ID -->
                    <div class="form-group">
                        <label for="staffId">Staff ID</label>
                        <input type="text" class="form-control glass-input" id="staffId" required>
                    </div>

                    <!-- First Name -->
                    <div class="form-group">
                        <label for="firstNameModal">First Name</label>
                        <input type="text" class="form-control glass-input" id="firstNameModal" required>
                    </div>

                    <!-- Last Name -->
                    <div class="form-group">
                        <label for="lastNameModal">Last Name</label>
                        <input type="text" class="form-control glass-input" id="lastNameModal" required>
                    </div>

                    <!-- Email -->
                    <div class="form-group">
                        <label for="emailModal">Email</label>
                        <input type="email" class="form-control glass-input" id="emailModal" required>
                    </div>

                    <!-- Contact -->
                    <div class="form-group">
                        <label for="contactModal">Contact</label>
                        <input type="text" class="form-control glass-input" id="contactModal" required>
                    </div>

                    <!-- Date of Birth -->
                    <div class="form-group">
                        <label for="dobModal">Date of Birth</label>
                        <input type="date" class="form-control glass-input" id="dobModal" required>
                    </div>

                    <!-- Role (Combo Box) -->
                    <div class="form-group">
                        <label for="role">Role</label>
                        <select id="roleModal" class="form-control glass-input" required>
                            <option value="">Select Role</option>
                            <option value="Manager">Manager</option>
                            <option value="Technician">Technician</option>
                            <option value="Worker">Worker</option>
                            <!-- Add more roles as needed -->
                        </select>
                    </div>

                    <!-- Designation -->
                    <div class="form-group">
                        <label for="designation">Designation</label>
                        <input type="text" class="form-control glass-input" id="designationModal" required>
                    </div>

                    <!-- Assigned Fields with Dynamic Combo Boxes -->
                    <div class="form-group">
                        <label for="assignedFields">Assigned Fields</label>
                        <div id="assignedFieldsContainer">
                            <div class="d-flex align-items-center mb-2">
                                <select class="form-control glass-input mr-2" name="assignedFields[]" required>
                                    <option value="">Select Field</option>
                                    <option value="Field A">Field A</option>
                                    <option value="Field B">Field B</option>
                                    <!-- Add more fields dynamically if needed -->
                                </select>
                                <button type="button" class="btn btn-sm custom-btn" onclick="removeField(this)"><i class="fa-regular fa-trash-can" style="color:green"></i></button>
                            </div>
                        </div>
                        <button type="button" class="btn btn-sm custom-btn mt-2" onclick="addField()" style="color: #274D40">+ Add Field</button>
                    </div>

                    <!-- Assigned Vehicles with Dynamic Combo Boxes -->
                    <div class="form-group">
                        <label for="assignedVehicles">Assigned Vehicles</label>
                        <div id="assignedVehiclesContainer">
                            <div class="d-flex align-items-center mb-2">
                                <select class="form-control glass-input mr-2" name="assignedVehicles[]" required>
                                    <option value="">Select Vehicle</option>
                                    <option value="Vehicle 1">Vehicle 1</option>
                                    <option value="Vehicle 2">Vehicle 2</option>
                                    <!-- Add more vehicles dynamically if needed -->
                                </select>
                                <button type="button" class="btn btn-sm custom-btn" onclick="removeVehicle(this)"><i class="fa-regular fa-trash-can"  style="color:green"></i></button>
                            </div>
                        </div>
                        <button type="button" class="btn btn-sm custom-btn mt-2" style="color: #274D40" onclick="addVehicle()">+ Add Vehicle</button>
                    </div>
                </form>
            </div>

            <!-- Modal Footer with Clear Button -->
            <div class="modal-footer btn-container">
                <button type="button" class="btn " onclick="clearForm()">
                    <i class="fas fa-eraser"></i> Clear
                </button>
                <button type="button" class="btn" data-dismiss="modal">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button id="addStaffBtn" type="button" class="btn ">
                    <i class="fas fa-plus"></i> Add Staff
                </button>
            </div>
        </div>
    </div>
</div>





<!-- jQuery and Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
<script>

    function toggleEditMode() {
        // Close the staffDetailModal
        $('#staffDetailModal').modal('hide');

        // Open the addStaffModal
        $('#addStaffModal').modal('show');

        // Change the modal header to "Update Member"
        document.getElementById('addStaffModalLabel').innerText = 'Update Member';

        // Change the button text from "Add Staff" to "Save Changes"
        const addStaffBtn = document.getElementById('addStaffBtn');
        addStaffBtn.innerText = 'Save Changes';
        //addStaffBtn.onclick = saveChanges;

        // Optionally, populate the addStaffForm with existing staff details
        // populateStaffForm();
    }

    document.getElementById('staffSearch').addEventListener('input', function () {
        const filter = this.value.toLowerCase();
        const rows = document.querySelectorAll('.staff-table tbody tr');

        rows.forEach(row => {
            const cells = row.querySelectorAll('td');
            const match = Array.from(cells).some(cell =>
                cell.textContent.toLowerCase().includes(filter)
            );
            row.style.display = match ? '' : 'none'; // Show row if match, hide if not
        });
    });

    document.querySelectorAll('table tbody tr').forEach(row => {
        row.addEventListener('click', function() {

            // Show the modal
            $('#staffDetailModal').modal('show');
        });
    });

    // Function to add an assigned field combo box
    function addField() {
        const container = document.getElementById('assignedFieldsContainer');
        const fieldDiv = document.createElement('div');
        fieldDiv.className = 'd-flex align-items-center mb-2';
        fieldDiv.innerHTML = `
            <select class="form-control glass-input mr-2" name="assignedFields[]" required>
                <option value="">Select Field</option>
                <option value="Field A">Field A</option>
                <option value="Field B">Field B</option>
                <!-- Add more fields dynamically if needed -->
            </select>
            <button type="button" class="btn btn-sm custom-btn" onclick="removeField(this)"><i class="fa-regular fa-trash-can" style="color:green"></i></button>
        `;
        container.appendChild(fieldDiv);
    }

    // Function to remove an assigned field combo box
    function removeField(button) {
        button.parentElement.remove();
    }

    // Function to add an assigned vehicle combo box
    function addVehicle() {
        const container = document.getElementById('assignedVehiclesContainer');
        const vehicleDiv = document.createElement('div');
        vehicleDiv.className = 'd-flex align-items-center mb-2';
        vehicleDiv.innerHTML = `
            <select class="form-control glass-input mr-2" name="assignedVehicles[]" required>
                <option value="">Select Vehicle</option>
                <option value="Vehicle 1">Vehicle 1</option>
                <option value="Vehicle 2">Vehicle 2</option>
                <!-- Add more vehicles dynamically if needed -->
            </select>
          <button type="button" class="btn btn-sm custom-btn" onclick="removeField(this)"><i class="fa-regular fa-trash-can" style="color:green"></i></button>
        `;
        container.appendChild(vehicleDiv);
    }

    // Function to remove an assigned vehicle combo box
    function removeVehicle(button) {
        button.parentElement.remove();
    }

    // Function to clear the form
    function clearForm() {
        document.getElementById("addStaffForm").reset();
        document.getElementById("assignedFieldsContainer").innerHTML = '';
        document.getElementById("assignedVehiclesContainer").innerHTML = '';
        addField(); // Add one initial field combo box
        addVehicle(); // Add one initial vehicle combo box
    }



</script>

</body>
</html>